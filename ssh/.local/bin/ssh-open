#!/usr/bin/sh

HOSTNAME=$(uname -n)

printf %s "$@" |
	sed -e "s/localhost/$HOSTNAME/" -e "s/127\(\.[0-9]\{1,3\}\)\{3\}/$HOSTNAME/" |
	if [ -S "$XDG_RUNTIME_DIR"/ssh-open.socket ]; then
		if stderr=$(nc -UN "$XDG_RUNTIME_DIR"/ssh-open.socket | grep .); then
			printf %s\\n "$stderr" 1>&2
			exit 1
		fi
	fi
