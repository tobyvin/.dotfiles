#!/bin/sh

if command -v handlr >/dev/null; then
	cmd="handlr open"
else
	cmd="$(command -p xdg-open 2>/dev/null)"
fi

# shellcheck disable=3028
host=${HOSTNAME:-${HOST:-$(uname -n)}}

for arg; do
	case $arg in
	"file://$host/"*) arg=file://localhost/"${arg#"file://$host/"}" ;;
	http://* | https://*) [ -n "$SSH_CLIENT" ] && cmd=ssh-open ;;
	esac
	shift
	set -- "$@" "$arg"
done

exec $cmd "$@"
