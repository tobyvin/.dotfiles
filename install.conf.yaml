- defaults:
    link:
      create: true
      relink: true
      force: true
    shell:
      quiet: true
      stdin: true

- clean: ["~"]

- shell:
    - command: git submodule update --init --recursive
      description: Installing submodules
    - command: curl -sfL git.io/antibody | sh -s - -b "${HOME}/.local/bin"
      description: Installing antibody
    - command: (cd ${HOME}/dotfiles/zsh; antibody bundle < plugins.txt > plugins.zsh)
      description: Installing zsh plugins
    - command: if [ ! -f "${HOME}/.fzf/install" ]; then git clone --depth 1 https://github.com/junegunn/fzf.git ~/.fzf; fi && yes | ~/.fzf/install --bin
      description: installing fzf
    - command: ./bat/install bat
      description: Installing bat
    - command: ./cheat.sh/install
      description: Installing cheat.sh

- link:
    ~/.bashrc:
    ~/.zshrc:
    ~/.p10k.zsh:
    ~/.gitconfig:
    ~/.ssh/config: ssh/config
    ~/.gnupg/:
      glob: true
      path: gnupg/*.conf

- shell:
    # ISSUE #1 Fails to import key inside of WSL2
    - command: gpg --keyserver hkps://keys.openpgp.org --recv-key 0xC8F6E06F5C8E2634
      description: Getting GPG public key
    - command: gpg --import-ownertrust gnupg/trustfile.txt
      description: Importing GPG trustfile
    - command: if [ -n "${WSL_DISTRO_NAME+1}" ]; then ./wsl.install; fi
      description: Checking for WSL
      stdout: true
      stderr: true
